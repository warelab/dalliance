(function e$$0(C,E,f){function y(v,n){if(!E[v]){if(!C[v]){var w="function"==typeof require&&require;if(!n&&w)return w(v,!0);if(B)return B(v,!0);w=Error("Cannot find module '"+v+"'");throw w.code="MODULE_NOT_FOUND",w;}w=E[v]={exports:{}};C[v][0].call(w.exports,function(c){var b=C[v][1][c];return y(b?b:c)},w,w.exports,e$$0,C,E,f)}return E[v].exports}for(var B="function"==typeof require&&require,G=0;G<f.length;G++)y(f[G]);return y})({1:[function(m,C,E){function f(){}function y(b,h,c,a,e){b.slice(0,10).fetch(function(d){return d?
B(b,h,c,a,e):a(null,"Couldn't access BAM.")},{timeout:5E3})}function B(c,h,u,a,e){function d(e){if(!e)return a(null,"Couldn't access BAM");e=g(e,e.byteLength);e=new Uint8Array(e);var d=v(e,0);if(21840194!=d)return a(null,"Not a BAM file, magic=0x"+d.toString(16));for(var l=v(e,4),z="",d=0;d<l;++d)z+=String.fromCharCode(e[d+8]);z=v(e,l+8);l+=12;k.chrToIndex={};k.indexToChr=[];for(d=0;d<z;++d){for(var D=v(e,l),h="",p=0;p<D-1;++p)h+=String.fromCharCode(e[l+4+p]);v(e,l+D+4);k.chrToIndex[h]=d;0==h.indexOf("chr")?
k.chrToIndex[h.substring(3)]=d:k.chrToIndex["chr"+h]=d;k.indexToChr.push(h);l=l+8+D}if(k.indices)return a(k)}var k=new f;k.data=c;k.bai=h;k.indexChunks=u;var p=k.indexChunks?k.indexChunks.minBlockIndex:1E9;if(k.indexChunks){h=k.indexChunks.chunks;k.indices=[];for(var l=0;l<h.length;l++)k.indices[l]=null;k.data.slice(0,p).fetch(d)}else k.bai.fetch(function(l){var q,h,z;if(l){var D=new Uint8Array(l),H=v(D,0);if(21578050!=H)l=a(null,"Not a BAI file, magic=0x"+H.toString(16));else{H=v(D,4);k.indices=
[];for(var I=8,g=0;g<H;++g){var r=I;q=D;var x=z=r;h=v(q,x);for(var x=x+4,F=0;F<h;++F){v(q,x);var n=v(q,x+4),x=x+(8+16*n)}for(var F=v(q,x),x=x+4,n=1E9,f=x,w=0;w<F;++w){var m=b(q,f),f=f+8;if(m){q=m.block;0<m.offset&&(q+=65536);q<n&&(n=q);break}}x+=8*F;q=n;z=x-z;I+=z;p=Math.min(q,p);0<h&&(k.indices[g]=new Uint8Array(l,r,I-r))}l=!0}}else l="Couldn't access BAI";!0!==l?k.bai.url&&"undefined"===typeof e?(k.bai.url=k.data.url.replace(/.bam$/,".bai"),B(c,k.bai,u,a,!0)):a(null,l):k.data.slice(0,p).fetch(d)})}
function G(){}if("undefined"!==typeof m){m("./spans");E=m("./bin");var v=E.readInt,n=E.readShort,w=E.readByte,c=E.readFloat;m=m("./lh3utils");var b=m.readVob,g=m.unbgzf,u=m.reg2bins,r=m.Chunk}m={MULTIPLE_SEGMENTS:1,ALL_SEGMENTS_ALIGN:2,SEGMENT_UNMAPPED:4,NEXT_SEGMENT_UNMAPPED:8,REVERSE_COMPLEMENT:16,NEXT_REVERSE_COMPLEMENT:32,FIRST_SEGMENT:64,LAST_SEGMENT:128,SECONDARY_ALIGNMENT:256,QC_FAIL:512,DUPLICATE:1024,SUPPLEMENTARY:2048};f.prototype.blocksForRange=function(c,h,g){var a=this.indices[c];if(!a)return[];
c=u(h,g);for(var e=[],d=0;d<c.length;++d)e[c[d]]=!0;c=[];for(var k=[],d=v(a,0),p=4,l=0;l<d;++l){var A=v(a,p),q=v(a,p+4),p=p+8;if(e[A])for(var t=0;t<q;++t){var z=b(a,p),D=b(a,p+8);(4681>A?k:c).push(new r(z,D));p+=16}else p+=16*q}d=v(a,p);e=null;h=Math.min(h>>14,d-1);g=Math.min(g>>14,d-1);for(d=h;d<=g;++d)(h=b(a,p+4+8*d))&&(!e||h.block<e.block||h.offset<e.offset)&&(e=h);a=[];if(null!=e)for(d=0;d<k.length;++d)g=k[d],g.maxv.block>=e.block&&g.maxv.offset>=e.offset&&a.push(g);k=a;a=[];for(d=0;d<k.length;++d)a.push(k[d]);
for(d=0;d<c.length;++d)a.push(c[d]);a.sort(function(a,e){var d=a.minv.block-e.minv.block;return 0!=d?d:a.minv.offset-e.minv.offset});c=[];if(0<a.length){k=a[0];for(d=1;d<a.length;++d)g=a[d],g.minv.block==k.maxv.block?k=new r(k.minv,g.maxv):(c.push(k),k=g);c.push(k)}return c};f.prototype.fetch=function(b,h,c,a,e){function d(){if(t>=l.length)return a(q);if(z){var A=new Uint8Array(z),A=k.readBamRecords(A,l[t].minv.offset,q,h,c,p,e);z=null;++t;return A?a(q):d()}var b=l[t],A=b.minv.block;k.data.slice(A,
b.maxv.block+65536-A).fetch(function(a){z=g(a,b.maxv.block-b.minv.block+1);return d()})}var k=this;e=e||{};var p=this.chrToIndex[b],l;if(void 0===p)l=[];else{if(null===this.indices[p]&&this.indexChunks.chunks[p]){var A=this.indexChunks.chunks[p];return this.bai.slice(A[0],A[1]).fetch(function(d){d=new Uint8Array(d);this.indices[p]=d;return this.fetch(b,h,c,a,e)}.bind(this))}(l=this.blocksForRange(p,h,c))||a(null,"Error in index fetch")}var q=[],t=0,z;d()};var x="=ACxGxxxTxxxxxxN".split(""),F="MIDNSHP=X???????".split("");
f.prototype.readBamRecords=function(b,h,g,a,e,d,k){for(;;){var p=v(b,h),p=h+p+4;if(p>=b.length)return!1;var l=new G,A=v(b,h+4),q=v(b,h+8),t=v(b,h+12),z=(t&65280)>>8,D=t&255,t=v(b,h+16),H=(t&4294901760)>>16,I=t&65535,t=v(b,h+20),u=v(b,h+24),r=v(b,h+28);v(b,h+32);l.segment=this.indexToChr[A];l.flag=H;l.pos=q;l.mq=z;k.light&&(l.seqLength=t);if(!k.light){0<=u&&(l.nextSegment=this.indexToChr[u],l.nextPos=r);z="";for(q=0;q<D-1;++q)z+=String.fromCharCode(b[h+36+q]);l.readName=z;h=h+36+D;D="";for(q=0;q<I;++q)z=
v(b,h),D=D+(z>>4)+F[z&15],h+=4;l.cigar=D;I="";D=t+1>>1;for(q=0;q<D;++q)z=b[h+q],I+=x[(z&240)>>4],I.length<t&&(I+=x[z&15]);h+=D;l.seq=I;I="";for(q=0;q<t;++q)I+=String.fromCharCode(b[h+q]+33);h+=t;for(l.quals=I;h<p;){I=String.fromCharCode(b[h],b[h+1]);D=String.fromCharCode(b[h+2]);if("A"==D)D=String.fromCharCode(b[h+3]),h+=4;else if("i"==D||"I"==D)D=v(b,h+3),h+=7;else if("c"==D||"C"==D)D=b[h+3],h+=4;else if("s"==D||"S"==D)D=n(b,h+3),h+=5;else if("f"==D)D=c(b,h+3),h+=7;else if("Z"==D||"H"==D)for(h+=
3,D="";q=b[h++],0!=q;)D+=String.fromCharCode(q);else if("B"==D){D=String.fromCharCode(b[h+3]);q=v(b,h+4);if("i"==D||"I"==D||"f"==D)z=4,H="f"==D?c:v;else if("s"==D||"S"==D)z=2,H=n;else if("c"==D||"C"==D)z=1,H=w;else throw"Unknown array type "+D;h+=8;D=[];for(u=0;u<q;++u)D.push(H(b,h)),h+=z}else throw"Unknown type "+D;l[I]=D}}if(!a||l.pos<=e&&l.pos+t>=a)void 0!==d&&A!=d||g.push(l);if(l.pos>e)return!0;h=p}};"undefined"!==typeof C&&(C.exports={makeBam:y,BAM_MAGIC:21840194,BAI_MAGIC:21578050,BamFlags:m})},
{"./bin":3,"./lh3utils":8,"./spans":10}],2:[function(m,C,E){function f(h,b){return h[b]+256*h[b+1]+65536*h[b+2]+16777216*h[b+3]+4294967296*h[b+4]}function y(){}function B(h,b,a,e){this.bwg=h;this.cirTreeOffset=b;this.cirTreeLength=a;this.isSummary=e}function G(h,b,a){var e=new y;e.data=h;e.name=a;e.data.slice(0,512).salted().fetch(function(a){if(!a)return b(null,"Couldn't fetch file");var k=new Uint8Array(a),h=new Int16Array(a);a=new Int32Array(a);var l=k[0]+256*k[1]+65536*k[2]+16777216*k[3];if(2291137574==
l)e.type="bigwig";else if(2273964779==l)e.type="bigbed";else return 654086024==l||3958540679==l?b(null,"Currently don't support big-endian BBI files"):b(null,"Not a supported format, magic=0x"+l.toString(16));e.version=h[2];e.numZoomLevels=h[3];e.chromTreeOffset=f(k,8);e.unzoomedDataOffset=f(k,16);e.unzoomedIndexOffset=f(k,24);e.fieldCount=h[16];e.definedFieldCount=h[17];e.asOffset=f(k,36);e.totalSummaryOffset=f(k,44);e.uncompressBufSize=a[13];e.extHeaderOffset=f(k,56);e.zoomLevels=[];for(h=0;h<e.numZoomLevels;++h){var l=
a[6*h+16],A=f(k,24*h+72),q=f(k,24*h+80);e.zoomLevels.push({reduction:l,dataOffset:A,indexOffset:q})}e.readChromTree(function(){e.getAutoSQL(function(a){e.schema=a;return b(e)})})},{timeout:5E3})}function v(h,b,a,e,d){this.bbi=h;this.type=b;this.fieldCount=a;this.offset=e;this.field=d}if("undefined"!==typeof m){E=m("./spans");var n=E.Range,w=E.union,c=E.intersection;E=m("./das");var b=E.DASFeature,g=E.DASGroup,u=m("./utils").shallowCopy,r=m("./bin").readInt;m=m("jszlib");var x=m.inflateBuffer,F=m.arrayCopy}var K=
/^[0-9]+,[0-9]+,[0-9]+/;y.prototype.readChromTree=function(h){var b=this;this.chromsToIDs={};this.idsToChroms={};this.maxID=0;var a=this.unzoomedDataOffset,a=a+4-(a-this.chromTreeOffset&3);this.data.slice(this.chromTreeOffset,a-this.chromTreeOffset).fetch(function(a){var d=new Uint8Array(a),k=new Int16Array(a),p=(new Int32Array(a))[2];f(d,16);var l=function(a){var e=d[a],h=k[a/2+1];a+=4;for(var z=0;z<h;++z)if(0==e){a+=p;var D=f(d,a);a+=8;D-=b.chromTreeOffset;l(D)}else{for(var D="",c=0;c<p;++c){var I=
d[a++];0!=I&&(D+=String.fromCharCode(I))}c=d[a+3]<<24|d[a+2]<<16|d[a+1]<<8|d[a+0];a+=8;b.chromsToIDs[D]=c;0==D.indexOf("chr")&&(b.chromsToIDs[D.substr(3)]=c);b.idsToChroms[c]=D;b.maxID=Math.max(b.maxID,c)}};l(32);h(b)})};B.prototype.readWigData=function(h,b,a,e){h=this.bwg.chromsToIDs[h];if(void 0===h)return e([]);this.readWigDataById(h,b,a,e)};B.prototype.readWigDataById=function(h,b,a,e){var d=this;if(this.cirHeader){var k=[],p=0;Date.now();var l=function(e,d,l,k){return(0>h||e==h)&&d<=a&&l>=b},
A=function(a,A){d.bwg.instrument&&console.log("level="+A+"; offset="+a+"; time="+(Date.now()|0));p+=a.length;if(1==a.length&&48==a[0]-d.cirTreeOffset&&d.cachedCirRoot)t(d.cachedCirRoot,0,A),--p,0==p&&d.fetchFeatures(l,k,e);else{for(var b=4+32*d.cirBlockSize,h,c=0;c<a.length;++c){var g=new n(a[c],a[c]+b);h=h?w(h,g):g}b=h.ranges();for(h=0;h<b.length;++h)q(a,b[h],A)}},q=function(a,q,A,h){q.max();q.min();d.bwg.data.slice(q.min(),q.max()-q.min()).fetch(function(h){for(var b=0;b<a.length;++b)q.contains(a[b])&&
(t(h,a[b]-q.min(),A),48==a[b]-d.cirTreeOffset&&0==a[b]-q.min()&&(d.cachedCirRoot=h),--p,0==p&&d.fetchFeatures(l,k,e))})},t=function(e,d,l){var q=new Uint8Array(e),t=new Int16Array(e);e=new Int32Array(e);var p=q[d],t=t[d/2+1];d+=4;if(0!=p)for(p=0;p<t;++p){var c=d/4,g=e[c],u=e[c+1],x=e[c+2],c=e[c+3],r=f(q,d+16);l=f(q,d+24);(0>h||g<h||g==h&&u<=a)&&(0>h||x>h||x==h&&c>=b)&&k.push({offset:r,size:l});d+=32}else{for(var F=[],p=0;p<t;++p)c=d/4,g=e[c],u=e[c+1],x=e[c+2],c=e[c+3],r=f(q,d+16),(0>h||g<h||g==h&&
u<=a)&&(0>h||x>h||x==h&&c>=b)&&F.push(r),d+=24;0<F.length&&A(F,l+1)}};A([d.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(l){d.cirHeader=l;l=new Int32Array(d.cirHeader);d.cirBlockSize=l[1];d.readWigDataById(h,b,a,e)})};B.prototype.fetchFeatures=function(h,c,a){var e=this;c.sort(function(a,e){return(a.offset|0)-(e.offset|0)});if(0==c.length)a([]);else{var d=[],k=function(a,k,q,h){h||(h={});var z=new b;z._chromId=a;z.segment=e.bwg.idsToChroms[a];z.min=k;z.max=q;
z.type=e.bwg.type;for(var p in h)z[p]=h[p];d.push(z)},p=function(){if(0==c.length)Date.now(),a(d);else{var l=c[0];if(l.data)e.parseFeatures(l.data,k,h),c.splice(0,1),p();else{for(var A=l.offset,q=l.size,l=1;l<c.length&&c[l].offset==A+q;)q+=c[l].size,++l;e.bwg.data.slice(A,q).fetch(function(a){for(var d=0,l=0;d<q;){var k=c[l],A;0<e.bwg.uncompressBufSize?A=x(a,d+2,k.size-2):(A=new Uint8Array(k.size),F(new Uint8Array(a,d,k.size),0,A,0,k.size),A=A.buffer);k.data=A;d+=k.size;++l}p()})}}};p()}};B.prototype.parseFeatures=
function(h,b,a){var e=new Uint8Array(h);if(this.isSummary)for(var d=new Int16Array(h),k=new Int32Array(h),p=new Float32Array(h),e=h.byteLength/32,d=0;d<e;++d){h=k[8*d];var l=k[8*d+1],A=k[8*d+2],q=k[8*d+3],t=p[8*d+5],z=p[8*d+6];a(h,l+1,A)&&(q={type:"bigwig",score:z/q,maxScore:t},"bigbed"==this.bwg.type&&(q.type="density"),b(h,l+1,A,q))}else if("bigwig"==this.bwg.type)if(d=new Int16Array(h),k=new Int32Array(h),p=new Float32Array(h),h=k[0],t=k[1],z=k[3],q=k[4],l=e[20],e=d[11],3==l)for(d=0;d<e;++d){var D=
p[d+6],k=t+d*z+1,l=t+d*z+q;a(h,k,l)&&b(h,k,l,{score:D})}else if(2==l)for(d=0;d<e;++d)l=k[2*d+6]+1,A=l+q-1,D=p[2*d+7],a(h,l,A)&&b(h,l,A,{score:D});else if(1==l)for(d=0;d<e;++d)l=k[3*d+6]+1,A=k[3*d+7],D=p[3*d+8],l>A&&(l=A),a(h,l,A)&&b(h,l,A,{score:D});else console.log("Currently not handling bwgType="+l);else if("bigbed"==this.bwg.type)for(d=0,q=this.bwg.definedFieldCount,t=this.bwg.schema;d<e.length;){h=e[d+3]<<24|e[d+2]<<16|e[d+1]<<8|e[d+0];l=e[d+7]<<24|e[d+6]<<16|e[d+5]<<8|e[d+4];A=e[d+11]<<24|e[d+
10]<<16|e[d+9]<<8|e[d+8];d+=12;for(D="";;)if(z=e[d++],0!=z)D+=String.fromCharCode(z);else break;var z={},H;H=0<D.length?D.split("\t"):[];0<H.length&&3<q&&(z.label=H[0]);1<H.length&&4<q&&(D=parseInt(H[1]),isNaN(D)||(z.score=D));2<H.length&&5<q&&(z.orientation=H[2]);5<H.length&&8<q&&(D=H[5],K.test(D)&&(z.itemRgb="rgb("+D+")"));if(H.length>q-3&&t)for(D=q-3;D<H.length;++D)z[t.fields[D+3].name]=H[D];if(a(h,l+1,A,H))if(12>q)b(h,l+1,A,z);else{var D=H[3]|0,I=H[4]|0,x=H[6]|0,r=H[7].split(","),F=H[8].split(",");
z.exonFrames&&(p=z.exonFrames.split(","),z.exonFrames=void 0);z.type="transcript";var f=new g;for(k in z)f[k]=z[k];f.id=H[0];f.segment=this.bwg.idsToChroms[h];f.min=l+1;f.max=A;f.notes=[];z.groups=[f];if(9<H.length){var v=A=z.geneName||H[9];10<H.length&&(v=H[10]);z.geneName2&&(v=z.geneName2);H=u(f);H.id=A;H.label=v;H.type="gene";z.groups.push(H)}A=[];for(H=0;H<x;++H)f=(F[H]|0)+l,f=new n(f,f+(r[H]|0)),A.push(f);r=w(A);x=r.ranges();for(l=0;l<x.length;++l)A=x[l],b(h,A.min()+1,A.max(),z);if(I>D&&(l="+"==
z.orientation?new n(D,I+3):new n(D-3,I),l=c(r,l))){z.type="translation";D=l.ranges();for(r=I=0;D[0].min()>x[r].max();)r++;for(l=0;l<D.length;++l)x=l,"-"==z.orientation&&(x=D.length-l-1),A=D[x],z.readframe=I,p&&(x=parseInt(p[x+r]),"number"===typeof x&&0<=x&&2>=x&&(z.readframe=x,z.readframeExplicit=!0)),x=A.max()-A.min(),I=(I+x)%3,b(h,A.min()+1,A.max(),z)}}}else throw Error("Don't know what to do with "+this.bwg.type);};B.prototype.getFirstAdjacent=function(b,c,a,e){b=this.bwg.chromsToIDs[b];if(void 0===
b)return e([]);this.getFirstAdjacentById(b,c,a,e)};B.prototype.getFirstAdjacentById=function(b,c,a,e){var d=this;if(this.cirHeader){var k=null,p=-1,l=-1,A=0;Date.now();var q=function(a,e){A+=a.length;for(var l=4+32*d.cirBlockSize,k,q=0;q<a.length;++q){var b=new n(a[q],a[q]+l);k=k?w(k,b):b}l=k.ranges();for(k=0;k<l.length;++k)t(a,l[k],e)},t=function(l,q,p,t){q.max();q.min();d.bwg.data.slice(q.min(),q.max()-q.min()).fetch(function(t){for(var g=0;g<l.length;++g)if(q.contains(l[g])&&(z(t,l[g]-q.min(),
p),--A,0==A)){if(!k)return 0<a&&(0!=b||0<c)?d.getFirstAdjacentById(0,0,a,e):0>a&&(b!=d.bwg.maxID||1E9>c)?d.getFirstAdjacentById(d.bwg.maxID,1E9,a,e):e([]);d.fetchFeatures(function(e,d,l,k){return 0>a&&(e<b||l<c)||0<a&&(e>b||d>c)},[k],function(d){for(var l=null,k=-1,q=-1,b=0;b<d.length;++b){var A=d[b],z=A._chromId,h=A.min,c=A.max;if(null==l||0>a&&(z>k||c>q)||0<a&&(z<k||h<q))l=A,q=0>a?c:h,k=z}return null!=l?e([l]):e([])})}})},z=function(e,A,z){var t=new Uint8Array(e),g=new Int16Array(e);e=new Int32Array(e);
var x=t[A],g=g[A/2+1];A+=4;if(0!=x)for(x=0;x<g;++x){var u=A/4,r=e[u],F=e[u+1],n=e[u+2],v=e[u+3],u=f(t,A+16);z=f(t,A+24);(0>a&&(r<b||r==b&&F<=c)||0<a&&(n>b||n==b&&v>=c))&&!/_random/.exec(d.bwg.idsToChroms[r])&&(null==k||0>a&&(n>p||n==p&&v>l)||0<a&&(r<p||r==p&&F<l))&&(k={offset:u,size:z},l=0>a?v:F,p=0>a?n:r);A+=32}else{for(var w=t=-1,x=0;x<g;++x){u=A/4;r=e[u];F=e[u+1];n=e[u+2];v=e[u+3];u=e[u+4]<<32|e[u+5];if(0>a&&(r<b||r==b&&F<=c)&&n>=b||0<a&&(n>b||n==b&&v>=c)&&r<=b)if(0>t||v>w)t=u,w=0>a?v:F;A+=24}0<=
t&&q([t],z+1)}};q([d.cirTreeOffset+48],1)}else this.bwg.data.slice(this.cirTreeOffset,48).fetch(function(l){d.cirHeader=l;l=new Int32Array(d.cirHeader);d.cirBlockSize=l[1];d.getFirstAdjacentById(b,c,a,e)})};y.prototype.readWigData=function(b,c,a,e){this.getUnzoomedView().readWigData(b,c,a,e)};y.prototype.getUnzoomedView=function(){if(!this.unzoomedView){var b=4E3;this.zoomLevels[0]&&(b=this.zoomLevels[0].dataOffset-this.unzoomedIndexOffset);this.unzoomedView=new B(this,this.unzoomedIndexOffset,b,
!1)}return this.unzoomedView};y.prototype.getZoomedView=function(b){b=this.zoomLevels[b];b.view||(b.view=new B(this,b.indexOffset,4E3,!0));return b.view};y.prototype._tsFetch=function(b,c,a,e,d){var k=this;if(b>=this.zoomLevels.length-1){if(this.topLevelReductionCache){for(var p=[],l=this.topLevelReductionCache,A=0;A<l.length;++A)l[A]._chromId==c&&p.push(l[A]);return d(p)}this.getZoomedView(this.zoomLevels.length-1).readWigDataById(-1,0,3E8,function(l){k.topLevelReductionCache=l;return k._tsFetch(b,
c,a,e,d)})}else return(0>b?this.getUnzoomedView():this.getZoomedView(b)).readWigDataById(c,a,e,d)};y.prototype.thresholdSearch=function(b,c,a,e,d){function k(){if(0==l.length)return d(null);l.sort(function(e,d){var l=e.zoom-d.zoom;if(0!=l)return l;l=e.chrOrd-d.chrOrd;return 0!=l?l:e.min-d.min*a});var b=l.splice(0,1)[0];p._tsFetch(b.zoom,b.chr,b.min,b.max,function(q){var A=0<a?0:3E8;b.fromRef&&(A=c);for(var h=0;h<q.length;++h){var p=q[h],g;g=void 0!=p.maxScore?p.maxScore:p.score;if(0<a){if(g>e)if(0>
b.zoom){if(p.min>A)return d(p)}else p.max>A&&l.push({chr:b.chr,chrOrd:b.chrOrd,zoom:b.zoom-2,min:p.min,max:p.max,fromRef:b.fromRef})}else if(g>e)if(0>b.zoom){if(p.max<A)return d(p)}else p.min<A&&l.push({chr:b.chr,chrOrd:b.chrOrd,zoom:b.zoom-2,min:p.min,max:p.max,fromRef:b.fromRef})}k()})}a=0>a?-1:1;var p=this;b=this.chromsToIDs[b];for(var l=[{chrOrd:0,chr:b,zoom:p.zoomLevels.length-4,min:0,max:3E8,fromRef:!0}],A=1;A<=this.maxID+1;++A){var q=(b+a*A)%(this.maxID+1);0>q&&(q+=this.maxID+1);l.push({chrOrd:A,
chr:q,zoom:p.zoomLevels.length-1,min:0,max:3E8})}k()};y.prototype.getAutoSQL=function(b){if(!this.asOffset)return b(null);this.data.slice(this.asOffset,2048).fetch(function(c){var a=new Uint8Array(c);c="";for(var e=0;e<a.length&&0!=a[e];++e)c+=String.fromCharCode(a[e]);var a=/([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g,d=/(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/.exec(c);if(d){e={declType:d[1],name:d[2],comment:d[4],fields:[]};c=c.substring(d[0]);for(d=a.exec(c);null!=d;d=a.exec(c))e.fields.push({type:d[1],
name:d[2],comment:d[4]});return b(e)}})};y.prototype.getExtraIndices=function(b){var c=this;if(4>this.version||0==this.extHeaderOffset||"bigbed"!=this.type)return b(null);this.data.slice(this.extHeaderOffset,64).fetch(function(a){if(!a)return b(null,"Couldn't fetch extension header");var e=new Uint8Array(a),d=new Int16Array(a);new Int32Array(a);var k=d[1];a=f(e,4);if(0==k)return b(null);c.data.slice(a,20*k).fetch(function(a){if(!a)return b(null,"Couldn't fetch index info");var e=new Uint8Array(a),
d=new Int16Array(a);new Int32Array(a);a=[];for(var q=0;q<k;++q){var t=d[10*q],z=d[10*q+1],g=f(e,20*q+4),t=new v(c,t,z,g,d[10*q+8]);a.push(t)}b(a)})})};v.prototype.lookup=function(b,c){var a=this;this.bbi.data.slice(this.offset,32).fetch(function(e){function d(e){a.bbi.data.slice(e,4+p*(l+A)).fetch(function(e){var k=new Uint8Array(e),q=new Uint16Array(e);new Uint32Array(e);q=q[1];e=4;if(0==k[0]){for(var p=null,g=0;g<q;++g){for(var x="",u=0;u<l;++u){var F=k[e++];0!=F&&(x+=String.fromCharCode(F))}u=
f(k,e);e+=8;if(0>b.localeCompare(x)&&p){d(p);return}p=u}d(p)}else{for(g=0;g<q;++g){x="";for(u=0;u<l;++u)F=k[e++],0!=F&&(x+=String.fromCharCode(F));if(x==b)return q=f(k,e),k=r(k,e+8),a.bbi.getUnzoomedView().fetchFeatures(function(e,d,l,k){if(k&&k.length>a.field-3)return k[a.field-3]==b},[{offset:q,size:k}],c);e+=A}return c([])}})}var k=new Uint8Array(e);new Int16Array(e);e=new Int32Array(e);var p=e[1],l=e[2],A=e[3];f(k,16);d(a.offset+32)})};"undefined"!==typeof C&&(C.exports={makeBwg:G,BIG_BED_MAGIC:2273964779,
BIG_WIG_MAGIC:2291137574})},{"./bin":3,"./das":5,"./spans":10,"./utils":11,jszlib:23}],3:[function(m,C,E){function f(b){this.blob=b}function y(b,c,g,h){h||("object"===typeof c?(h=c,c=void 0):h={});this.url=b;this.start=c||0;g&&(this.end=g);this.opts=h}function B(b){if(!b)return null;for(var c=new Uint8Array(b.length),g=0;g<c.length;++g)c[g]=b.charCodeAt(g);return c.buffer}function G(b,c){return b[c+7]<<24|b[c+6]<<16|b[c+5]<<8|b[c+4]}function v(b,c){return b[c+3]<<24|b[c+2]<<16|b[c+1]<<8|b[c]}function n(b,
c){return b[c+1]<<8|b[c]}function w(b,c){return b[c]}function c(b,c){return b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3]}if("undefined"!==typeof m)var b=m("./utils").shallowCopy,g=m("./sha1").b64_sha1;f.prototype.slice=function(b,c){var g;g=this.blob.slice?c?this.blob.slice(b,b+c):this.blob.slice(b):c?this.blob.webkitSlice(b,b+c):this.blob.webkitSlice(b);return new f(g)};f.prototype.salted=function(){return this};f.prototype.fetch="undefined"!==typeof FileReader?function(b){var c=new FileReader;c.onloadend=
function(g){b(B(c.result))};c.readAsBinaryString(this.blob)}:function(b){var c=new FileReaderSync;try{var g=c.readAsArrayBuffer(this.blob);b(g)}catch(h){b(null,h)}};y.prototype.slice=function(b,c){if(0>b)throw"Bad slice "+b;var g=this.start,h=this.end,g=g&&b?g+b:b||g;return new y(this.url,g,c&&g?g+c-1:h||c-1,this.opts)};var u=0,r=0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome");y.prototype.fetchAsText=function(b){try{var c=new XMLHttpRequest,n=this.url;(r||this.opts.salt)&&
0>n.indexOf("?")&&(n=n+"?salt="+g(""+Date.now()+","+ ++u));c.open("GET",n,!0);if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";c.setRequestHeader("Range","bytes="+this.start+"-"+this.end)}c.onreadystatechange=function(){if(4==c.readyState)return 200==c.status||206==c.status?b(c.responseText):b(null)};this.opts.credentials&&(c.withCredentials=!0);c.send("")}catch(h){return b(null)}};y.prototype.salted=function(){var c=b(this.opts);c.salt=!0;return new y(this.url,this.start,this.end,c)};
y.prototype.fetch=function(b,c){var n=this;c=c||{};var h=c.attempt||1,f=c.truncatedLength;if(3<h)return b(null);try{var a;c.timeout&&!this.opts.credentials&&(a=setTimeout(function(){console.log("timing out "+k);e.abort();return b(null,"Timeout")},c.timeout));var e=new XMLHttpRequest,d,k=this.url;(r||this.opts.salt)&&0>k.indexOf("?")&&(k=k+"?salt="+g(""+Date.now()+","+ ++u));e.open("GET",k,!0);e.overrideMimeType("text/plain; charset=x-user-defined");if(this.end){if(1E8<this.end-this.start)throw"Monster fetch!";
e.setRequestHeader("Range","bytes="+this.start+"-"+this.end);d=this.end-this.start+1}e.responseType="arraybuffer";e.onreadystatechange=function(){if(4==e.readyState){a&&clearTimeout(a);if(200==e.status||206==e.status){if(e.response){var l=e.response.byteLength;return!d||d==l||f&&l==f?b(e.response):n.fetch(b,{attempt:h+1,truncatedLength:l})}if(e.mozResponseArrayBuffer)return b(e.mozResponseArrayBuffer);l=e.responseText;return!d||d==l.length||f&&l.length==f?b(B(e.responseText)):n.fetch(b,{attempt:h+
1,truncatedLength:l.length})}return n.fetch(b,{attempt:h+1})}};this.opts.credentials&&(e.withCredentials=!0);e.send("")}catch(p){return b(null)}};(function(b){var c=new ArrayBuffer(8),g=new Uint8Array(c),h=new Float32Array(c);b.readFloat=function(b,a){g[0]=b[a];g[1]=b[a+1];g[2]=b[a+2];g[3]=b[a+3];return h[0]}})(this);"undefined"!==typeof C&&(C.exports={BlobFetchable:f,URLFetchable:y,readInt:v,readIntBE:c,readInt64:G,readShort:n,readByte:w,readFloat:this.readFloat})},{"./sha1":9,"./utils":11}],4:[function(m,
C,E){function f(b,c,u,r){this.red=b|0;this.green=c|0;this.blue=u|0;r&&(this.name=r)}function y(b){b="00"+b.toString(16);return b.substring(b.length-2)}function B(b){var g=n[b];g||((g=w.exec(b))?g=new f("0x"+g[1]|0,"0x"+g[2]|0,"0x"+g[3]|0,b):(g=c.exec(b))?g=new f(g[1]|0,g[2]|0,g[3]|0,b):(console.log("couldn't handle color: "+b),g=n.black),n[b]=g);return g}function G(b,c,u){for(var r=[],n=0;n<u.length;++n)r.push(B(u[n]));u=[];n=0;a:for(;n<b;++n){for(var v=c[0]+1*n/(b-1)*(c[c.length-1]-c[0]),w=0;w<c.length-
1;++w)if(v>=c[w]&&v<=c[w+1]){var v=(v-c[w])/(c[w+1]-c[w]),h=r[w],w=r[w+1],w=(new f(h.red*(1-v)+w.red*v|0,h.green*(1-v)+w.green*v|0,h.blue*(1-v)+w.blue*v|0)).toSvgString();u.push(w);continue a}throw"Bad step";}return u}function v(b,c,u,r){return r?G(b,[0,.5,1],[c,u,r]):G(b,[0,1],[c,u])}f.prototype.toSvgString=function(){this.name||(this.name="rgb("+this.red+","+this.green+","+this.blue+")");return this.name};f.prototype.toHexString=function(){return"#"+y(this.red)+y(this.green)+y(this.blue)};var n=
{red:new f(255,0,0,"red"),green:new f(0,255,0,"green"),blue:new f(0,0,255,"blue"),yellow:new f(255,255,0,"yellow"),white:new f(255,255,255,"white"),black:new f(0,0,0,"black"),gray:new f(180,180,180,"gray"),grey:new f(180,180,180,"grey"),lightskyblue:new f(135,206,250,"lightskyblue"),lightsalmon:new f(255,160,122,"lightsalmon"),hotpink:new f(255,105,180,"hotpink")},w=/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/,c=/rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;"undefined"!==typeof C&&(C.exports={makeColourSteps:G,
makeGradient:v,dasColourForName:B})},{}],5:[function(m,C,E){function f(a,e,d,b){this.name=a;this.start=e;this.end=d;this.description=b}function y(a,e){var d;"string"==typeof a?(this.uri=a,d=e||{}):d=a||{};for(var b in d)"function"!=typeof d[b]&&(this[b]=d[b]);this.coords||(this.coords=[]);this.props||(this.props={});(this.dasBaseURI=this.uri)&&"/"!=this.dasBaseURI.substr(this.uri.length-1)&&(this.dasBaseURI+="/")}function B(){}function G(a,e){return a.taxon==e.taxon&&a.auth==e.auth&&a.version==e.version}
function v(a,e,d,b,c){this.name=a;this.start=e;this.end=d;this.alphabet=b;this.seq=c}function n(){}function w(a){a&&(this.id=a)}function c(a,e){this.desc=a;this.uri=e}function b(a){this.type=a;this.objects={};this.blocks=[]}function g(){this.styles=[]}function u(){}function r(a,e){e=e||{};this.uri=a;this.opts=e}function x(a,e){var d=a.getElementsByTagName(e);if(0<d.length&&d[0].firstChild){d=d[0];if(1==d.childNodes.length)return d.firstChild.nodeValue;for(var b="",c=0;c<d.childNodes.length;++c)b+=
d.childNodes[c].nodeValue;return b}return null}function F(a){for(var e=[],d=a.getElementsByTagName("LINK"),b=0;b<d.length;++b){var k=d[b];k.parentNode==a&&e.push(new c(k.firstChild?k.firstChild.nodeValue:"Unknown",k.getAttribute("href")))}return e}function K(a){var e=[];a=a.getElementsByTagName("NOTE");for(var d=0;d<a.length;++d)a[d].firstChild&&e.push(a[d].firstChild.nodeValue);return e}function h(a,e,d,b){if(window.XDomainRequest){var c=new XDomainRequest;c.onload=function(){var a=new ActiveXObject("Microsoft.XMLDOM");
a.async=!1;a.loadXML(c.responseText);e(a)};c.open("get",a);c.send("")}else try{var c=new XMLHttpRequest,k=setTimeout(function(){console.log("timing out "+a);c.abort();e(null,c)},5E3);c.timeout=5E3;c.ontimeout=function(){console.log("timeout on "+a)};c.onreadystatechange=function(){4==c.readyState&&(clearTimeout(k),(200<=c.status||0==c.status)&&e(c.responseXML,c))};c.open("get",a,!0);d&&(c.withCredentials=!0);b&&c.setRequestHeader("X-DAS-Authorisation",b);c.overrideMimeType("text/xml");c.setRequestHeader("Accept",
"application/xml,*/*");c.send("")}catch(p){e(null,c,p)}}function L(a){a=(""+a).toLowerCase();return"yes"===a||"true"===a}function a(a){if(!a)return!1;a=(""+a).toLowerCase();return"no"!==a||"false"!==a}function e(a){var e=d(a);e.styles=[];for(var b=0;b<a.styles.length;++b){var c=e.styles[b]=d(a.styles[b]);c._methodRE=c._labelRE=c._typeRE=void 0;c.style=d(c.style);c.style.id=void 0;c.style._gradient=void 0}return e}if("undefined"!==typeof m){E=m("./utils");var d=E.shallowCopy,k=E.pusho,p=m("./color").makeColourSteps}f.prototype.toString=
function(){return this.name+":"+this.start+".."+this.end};f.prototype.isBounded=function(){return this.start&&this.end};f.prototype.toDASQuery=function(){var a="segment="+this.name;this.start&&this.end&&(a+=":"+this.start+","+this.end);return a};y.prototype.entryPoints=function(a){this.doCrossDomainRequest(this.dasBaseURI+"entry_points",function(e){if(!e)return a([]);var d=[];e=e.getElementsByTagName("SEGMENT");for(var b=0;b<e.length;++b){var c=e[b],k=c.getAttribute("id"),p=c.getAttribute("size"),
h;p?(h=1,p|=0):((h=c.getAttribute("start"))&&(h|=0),(p=c.getAttribute("stop"))&&(p|=0));var g=null;c.firstChild&&(g=c.firstChild.nodeValue);d.push(new f(k,h,p,g))}a(d)})};y.prototype.sequence=function(a,e){var d=this.dasBaseURI+"sequence?"+a.toDASQuery();this.doCrossDomainRequest(d,function(a){if(a){var d=[];a=a.getElementsByTagName("SEQUENCE");for(var b=0;b<a.length;++b){var c=a[b],l=c.getAttribute("id"),k=c.getAttribute("start"),q=c.getAttribute("stop"),p=null;if(c.firstChild)for(var c=c.firstChild.nodeValue,
p="",h=0;;){var g=c.indexOf("\n",h);if(0<=g)p+=c.substring(h,g).toUpperCase(),h=g+1;else{p+=c.substring(h).toUpperCase();break}}d.push(new v(l,k,q,"DNA",p))}e(d)}else e([])})};y.prototype.features=function(a,e,d){e=e||{};var b;if(this.features_uri)b=this.features_uri;else{var c=[];if(a)c.push(a.toDASQuery());else if(e.group)if(a=e.group,"string"==typeof a)c.push("group_id="+a);else for(var k=0;k<a.length;++k)c.push("group_id="+a[k]);if(e.adjacent)for(a=e.adjacent,"string"==typeof a&&(a=[a]),k=0;k<
a.length;++k)c.push("adjacent="+a[k]);if(e.type)if("string"==typeof e.type)c.push("type="+e.type);else for(a=0;a<e.type.length;++a)c.push("type="+e.type[a]);e.maxbins&&c.push("maxbins="+e.maxbins);0<c.length?b=this.dasBaseURI+"features?"+c.join(";"):d([],"No filters specified")}this.doCrossDomainRequest(b,function(a,e){if(a){for(var b=[],c={},l=a.getElementsByTagName("SEGMENT"),k=0;k<l.length;++k){var A=l[k],p=A.getAttribute("id");c[p]={min:A.getAttribute("start"),max:A.getAttribute("stop")};for(var A=
A.getElementsByTagName("FEATURE"),h=0;h<A.length;++h){var g=A[h],z=new n;z.segment=p;z.id=g.getAttribute("id");z.label=g.getAttribute("label");var t=x(g,"START"),u=x(g,"END");(t|0)>(u|0)?(z.min=u|0,z.max=t|0):(z.min=t|0,z.max=u|0);t=g.getElementsByTagName("TYPE");0<t.length&&(t=t[0],t.firstChild&&(z.type=t.firstChild.nodeValue),z.typeId=t.getAttribute("id"),z.typeCv=t.getAttribute("cvId"));z.type=x(g,"TYPE");!z.type&&z.typeId&&(z.type=z.typeId);z.method=x(g,"METHOD");(t=x(g,"ORIENTATION"))||(t="0");
z.orientation=t;z.score=x(g,"SCORE");z.links=F(g);z.notes=K(g);t=g.getElementsByTagName("GROUP");for(u=0;u<t.length;++u){var r=t[u],D=new w;D.type=r.getAttribute("type");D.id=r.getAttribute("id");D.links=F(r);D.notes=K(r);z.groups?z.groups.push(D):z.groups=Array(D)}if(z.notes)for(t=0;t<z.notes.length;++t)u=z.notes[t],0==u.indexOf("Genename=")&&(r=new w,r.type="gene",r.id=u.substring(9),z.groups?z.groups.push(r):z.groups=Array(r));t=g.getElementsByTagName("PART");if(0<t.length){r=[];for(u=0;u<t.length;++u)r.push(t[u].getAttribute("id"));
z.parts=r}t=g.getElementsByTagName("PARENT");if(0<t.length){g=[];for(u=0;u<t.length;++u)g.push(t[u].getAttribute("id"));z.parents=g}b.push(z)}}d(b,void 0,c)}else d([],"Failed request: "+(0==e.status?"server may not support CORS":"status="+e.status))},function(a){d([],a)})};y.prototype.alignments=function(a,e,d){var c=this.dasBaseURI+"alignment?query="+a;this.doCrossDomainRequest(c,function(a){if(a){var e=[];a=a.getElementsByTagName("alignment");for(var k=0;k<a.length;++k){for(var l=a[k],A=new b(l.getAttribute("alignType")),
p=l.getElementsByTagName("alignObject"),h=0;h<p.length;++h){var g=p[h],g={id:g.getAttribute("intObjectId"),accession:g.getAttribute("dbAccessionId"),version:g.getAttribute("objectVersion"),dbSource:g.getAttribute("dbSource"),dbVersion:g.getAttribute("dbVersion")};A.objects[g.id]=g}l=l.getElementsByTagName("block");for(p=0;p<l.length;++p){for(var g=l[p],h={order:g.getAttribute("blockOrder"),segments:[]},g=g.getElementsByTagName("segment"),u=0;u<g.length;++u){var r=g[u],r={object:r.getAttribute("intObjectId"),
min:r.getAttribute("start"),max:r.getAttribute("end"),strand:r.getAttribute("strand"),cigar:x(r,"cigar")};h.segments.push(r)}A.blocks.push(h)}e.push(A)}d(e)}else d([],"Failed request "+c)})};g.prototype.pushStyle=function(a,e,b){a||(a={type:"default"});a=d(a);e&&(a.zoom=e);a.style=b;this.styles.push(a)};y.prototype.stylesheet=function(a,e){var d,b=this.credentials;this.stylesheet_uri?(d=this.stylesheet_uri,b=!1):d=this.dasBaseURI+"stylesheet";h(d,function(d){if(d){var b=new g;d=d.getElementsByTagName("TYPE");
for(var c=0;c<d.length;++c){var k=d[c],q={};q.type=k.getAttribute("id");q.label=k.getAttribute("label");q.method=k.getAttribute("method");for(var k=k.getElementsByTagName("GLYPH"),h=0;h<k.length;++h){var t=k[h],r=t.getAttribute("zoom"),n;a:{if(t.hasChildNodes()){t=t.firstChild;do{if(t.nodeType==Node.ELEMENT_NODE){n=t;break a}t=t.nextSibling}while(null!=t)}n=null}t=new u;t.glyph=n.localName;for(n=n.firstChild;n;){if(n.nodeType==Node.ELEMENT_NODE)if("BGGRAD"==n.localName){var v=t,f=n.localName,w,x=
n;w=(w=x.getAttribute("steps"))?w|0:50;for(var m=[],y=[],x=x.getElementsByTagName("STOP"),F=0;F<x.length;++F){var B=x[F];m.push(1*B.getAttribute("score"));y.push(B.firstChild.nodeValue)}w=p(w,m,y);v[f]=w}else t[n.localName]=n.firstChild.nodeValue;n=n.nextSibling}b.pushStyle(q,r,t)}}a(b)}else e&&e()},b)};r.prototype.sources=function(a,e,d){d||(d={});var b=[];d.taxon&&b.push("organism="+d.taxon);d.auth&&b.push("authority="+d.auth);d.version&&b.push("version="+d.version);d=this.uri;0<b.length&&(d=d+
"?"+b.join("&"));h(d,function(d){if(!d&&e)e();else{var b=[];d=d.getElementsByTagName("SOURCE");for(var c=0;c<d.length;++c){var q=d[c],p=q.getElementsByTagName("VERSION");if(!(1>p.length)){for(var h=p[0],g=h.getElementsByTagName("COORDINATES"),p=[],t=0;t<g.length;++t){var u=g[t],r=new B;r.auth=u.getAttribute("authority");r.taxon=u.getAttribute("taxid");r.version=u.getAttribute("version");p.push(r)}for(var g=[],u=h.getElementsByTagName("CAPABILITY"),n,t=0;t<u.length;++t)r=u[t],g.push(r.getAttribute("type")),
"das1:features"==r.getAttribute("type")&&(n=r.getAttribute("query_uri"),n=n.substring(0,n.length-8));t={};h=h.getElementsByTagName("PROP");for(u=0;u<h.length;++u)k(t,h[u].getAttribute("name"),h[u].getAttribute("value"));n&&(q=new y(n,{source_uri:q.getAttribute("uri"),name:q.getAttribute("title"),desc:q.getAttribute("description"),coords:p,props:t,capabilities:g}),b.push(q))}}a(b)}})};y.prototype.doCrossDomainRequest=function(a,e,d){var b;this.xUser&&(b="Basic "+btoa(this.xUser+":"+this.xPass));try{return h(a,
e,this.credentials,b)}catch(c){if(d)d(c);else throw c;}};"undefined"!==typeof C&&(C.exports={DASGroup:w,DASFeature:n,DASStylesheet:g,DASStyle:u,DASSource:y,DASSegment:f,DASRegistry:r,DASSequence:v,DASLink:c,isDasBooleanTrue:L,isDasBooleanNotFalse:a,copyStylesheet:e,coordsMatch:G})},{"./color":4,"./utils":11}],6:[function(m,C,E){function f(v,n){0>v.indexOf("?")&&(v+="?soft=true");return new G(function(f,c){var b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState)if(300<=b.status)c("Error code "+
b.status);else{var g=JSON.parse(b.response);f(n?g:g.location)}};b.open("GET",v,!0);b.setRequestHeader("Accept","application/json");b.responseType="text";b.send("")})}function y(f){this.rawurl=f}function B(f,n,w,c){c||("object"===typeof n?(c=n,n=void 0):c={});this.url="string"===typeof f?new y(f):f;this.start=n||0;w&&(this.end=w);this.opts=c}if("undefined"!==typeof m)var G=m("es6-promise").Promise;y.prototype.getURLPromise=function(){this.urlPromise&&this.urlPromiseValidity>Date.now()||(this.urlPromise=
f(this.rawurl,!0).then(function(f){return f.location}),this.urlPromiseValidity=Date.now()+432E5);return this.urlPromise};B.prototype.slice=function(f,n){if(0>f)throw"Bad slice "+f;var w=this.start,c=this.end,w=w&&f?w+f:f||w;return new B(this.url,w,n&&w?w+n-1:c||n-1,this.opts)};B.prototype.fetchAsText=function(f){var n=this,w=new XMLHttpRequest;n.url.getURLPromise().then(function(c){w.open("GET",c,!0);if(n.end){if(1E8<n.end-n.start)throw"Monster fetch!";w.setRequestHeader("Range","bytes="+n.start+
"-"+n.end)}w.onreadystatechange=function(){if(4==w.readyState)return 200==w.status||206==w.status?f(w.responseText):f(null)};n.opts.credentials&&(w.withCredentials=!0);w.send("")}).catch(function(c){console.log(c);return f(null)})};B.prototype.salted=function(){return this};B.prototype.fetch=function(f,n,w){var c=this;n=n||1;if(3<n)return f(null);c.url.getURLPromise().then(function(b){var g=new XMLHttpRequest,u;g.open("GET",b,!0);g.overrideMimeType("text/plain; charset=x-user-defined");if(c.end){if(1E8<
c.end-c.start)throw"Monster fetch!";g.setRequestHeader("Range","bytes="+c.start+"-"+c.end);u=c.end-c.start+1}g.responseType="arraybuffer";g.onreadystatechange=function(){if(4==g.readyState){if(200==g.status||206==g.status){if(g.response){var b=g.response.byteLength;return!u||u==b||w&&b==w?f(g.response):c.fetch(f,n+1,b)}if(g.mozResponseArrayBuffer)return f(g.mozResponseArrayBuffer);b=g.responseText;if(!u||u==b.length||w&&b.length==w){if(b=g.responseText){for(var x=new Uint8Array(b.length),m=0;m<x.length;++m)x[m]=
b.charCodeAt(m);b=x.buffer}else b=null;return f(b)}return c.fetch(f,n+1,b.length)}return c.fetch(f,n+1)}};c.opts.credentials&&(g.withCredentials=!0);g.send("")}).catch(function(b){console.log(b)})};"undefined"!==typeof C&&(C.exports={lookupEncodeURI:f,EncodeFetchable:B})},{"es6-promise":12}],7:[function(m,C,E){(function(f){function y(b){this.bam=b}function B(b){this.bbi=b}var G=m("./bin"),v=m("./bam"),n=m("./bigwig"),w=m("./encode"),c=m("./utils"),b={},g=0;f.newID=function(){return"cn"+ ++g};postMessage({tag:"init"});
self.onmessage=function(g){var r=g.data,f=g.data.command,m=g.data.tag;if("connectBAM"===f){var E=newID(),h;r.blob?(g=new G.BlobFetchable(r.blob),f=new G.BlobFetchable(r.indexBlob)):(g=new G.URLFetchable(r.uri,{credentials:r.credentials}),f=new G.URLFetchable(r.indexUri,{credentials:r.credentials}),h=r.indexChunks);v.makeBam(g,f,h,function(c,a){c?(b[E]=new y(c),postMessage({tag:m,result:E})):postMessage({tag:m,error:a||"Couldn't fetch BAM"})})}else if("connectBBI"===f)E=newID(),h=r.blob?new G.BlobFetchable(r.blob):
"encode"==r.transport?new w.EncodeFetchable(r.uri,{credentials:r.credentials}):new G.URLFetchable(r.uri,{credentials:r.credentials}),n.makeBwg(h,function(c,a){c?(b[E]=new B(c),postMessage({tag:m,result:E})):postMessage({tag:m,error:a||"Couldn't fetch BBI"})},r.uri);else if("textxhr"===f)c.textXHR(r.uri,function(b,a){b?postMessage({tag:m,result:b}):postMessage({tag:m,err:a||"Couldn't fetch resource"})});else if("fetch"===f){h=b[g.data.connection];if(!h)return postMessage({tag:m,error:"No such connection: "+
g.data.connection});h.fetch(r.tag,r.chr,r.min,r.max,r.zoom,r.opts)}else if("leap"===f){h=b[g.data.connection];if(!h)return postMessage({tag:m,error:"No such connection: "+g.data.connection});h.leap(r.tag,r.chr,r.pos,r.dir)}else if("quantLeap"===f){h=b[g.data.connection];if(!h)return postMessage({tag:m,error:"No such connection: "+g.data.connection});h.quantLeap(r.tag,r.chr,r.pos,r.dir,r.threshold,r.under)}else if("meta"===f){h=b[g.data.connection];if(!h)return postMessage({tag:m,error:"No such connection: "+
g.data.connection});h.meta(r.tag)}else if("search"===f){h=b[g.data.connection];if(!h)return postMessage({tag:m,error:"No such connection: "+g.data.connection});h.search(r.tag,r.query,r.index)}else{if("date"===f)return postMessage({tag:m,result:Date.now()|0});postMessage({tag:m,error:"Bad command "+f})}};y.prototype.fetch=function(b,c,g,f,n,h){h=h||{};this.bam.fetch(c,g,f,function(c,a){c?postMessage({tag:b,result:c,time:Date.now()|0}):postMessage({tag:b,error:a})},h)};B.prototype.fetch=function(b,
c,g,f,n){"number"!==typeof n&&(n=-1);(0>n?this.bbi.getUnzoomedView():this.bbi.getZoomedView(n)).readWigData(c,g,f,function(c){postMessage({tag:b,result:c})})};B.prototype.meta=function(b){for(var c=[1],g=0;g<this.bbi.zoomLevels.length;++g)c.push(this.bbi.zoomLevels[g].reduction);var f=this,n={type:this.bbi.type,zoomLevels:c,fieldCount:this.bbi.fieldCount,definedFieldCount:this.bbi.definedFieldCount,schema:this.bbi.schema};"bigbed"===this.bbi.type?this.bbi.getExtraIndices(function(c){c&&(f.extraIndices=
c,n.extraIndices=c.map(function(b){return b.field}));postMessage({tag:b,result:n})}):postMessage({tag:b,result:n})};B.prototype.leap=function(b,c,g,f){this.bbi.getUnzoomedView().getFirstAdjacent(c,g,f,function(c,g){postMessage({tag:b,result:c,error:g})})};B.prototype.quantLeap=function(b,c,g,f,n,h){this.bbi.thresholdSearch(c,g,f,n,function(c,a){postMessage({tag:b,result:c,error:a})})};B.prototype.search=function(b,c,g){this.extraIndices[0].lookup(c,function(c,g){postMessage({tag:b,result:c,error:g})})}}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./bam":1,"./bigwig":2,"./bin":3,"./encode":6,"./utils":11}],8:[function(m,C,E){function f(b,c){this.block=b;this.offset=c}function y(b,c){var n=4294967296*(b[c+6]&255)+16777216*(b[c+5]&255)+65536*(b[c+4]&255)+256*(b[c+3]&255)+(b[c+2]&255),r=b[c+1]<<8|b[c];return 0==n&&0==r?null:new f(n,r)}function B(b,g){g=Math.min(g||1,b.byteLength-50);for(var f=[],n=[0],m=0;n[0]<g;){var v=new Uint8Array(b,
n[0],12),v=v[11]<<8|v[10],v=w(b,12+v+n[0],Math.min(65536,b.byteLength-12-v-n[0]),n);n[0]+=8;m+=v.byteLength;f.push(v)}if(1==f.length)return f[0];n=new Uint8Array(m);for(v=m=0;v<f.length;++v){var y=new Uint8Array(f[v]);c(y,0,n,m,y.length);m+=y.length}return n.buffer}function G(b,c){this.minv=b;this.maxv=c}function v(b,c){--c;return b>>14==c>>14?4681+(b>>14):b>>17==c>>17?585+(b>>17):b>>20==c>>20?73+(b>>20):b>>23==c>>23?9+(b>>23):b>>26==c>>26?1+(b>>26):0}function n(b,c){var n,f=[];--c;f.push(0);for(n=
1+(b>>26);n<=1+(c>>26);++n)f.push(n);for(n=9+(b>>23);n<=9+(c>>23);++n)f.push(n);for(n=73+(b>>20);n<=73+(c>>20);++n)f.push(n);for(n=585+(b>>17);n<=585+(c>>17);++n)f.push(n);for(n=4681+(b>>14);n<=4681+(c>>14);++n)f.push(n);return f}if("undefined"!==typeof m){m=m("jszlib");var w=m.inflateBuffer,c=m.arrayCopy}f.prototype.toString=function(){return""+this.block+":"+this.offset};"undefined"!==typeof C&&(C.exports={unbgzf:B,readVob:y,reg2bin:v,reg2bins:n,Chunk:G})},{jszlib:23}],9:[function(m,C,E){function f(n){n=
B(G(n));for(var f="",c,b=0;b<n.length;b++)c=n.charCodeAt(b),f+="0123456789abcdef".charAt(c>>>4&15)+"0123456789abcdef".charAt(c&15);return f}function y(n){n=B(G(n));for(var f="",c=n.length,b=0;b<c;b+=3)for(var g=n.charCodeAt(b)<<16|(b+1<c?n.charCodeAt(b+1)<<8:0)|(b+2<c?n.charCodeAt(b+2):0),u=0;4>u;u++)f=8*b+6*u>8*n.length?f+"":f+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>6*(3-u)&63);return f}function B(n){for(var f=Array(n.length>>2),c=0;c<f.length;c++)f[c]=0;for(c=
0;c<8*n.length;c+=8)f[c>>5]|=(n.charCodeAt(c/8)&255)<<24-c%32;n=8*n.length;f[n>>5]|=128<<24-n%32;f[(n+64>>9<<4)+15]=n;n=Array(80);for(var c=1732584193,b=-271733879,g=-1732584194,u=271733878,r=-1009589776,m=0;m<f.length;m+=16){for(var y=c,B=b,h=g,G=u,a=r,e=0;80>e;e++){if(16>e)n[e]=f[m+e];else{var d=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=d<<1|d>>>31}var d=c<<5|c>>>27,k;k=20>e?b&g|~b&u:40>e?b^g^u:60>e?b&g|b&u|g&u:b^g^u;d=v(v(d,k),v(v(r,n[e]),20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514));
r=u;u=g;g=b<<30|b>>>2;b=c;c=d}c=v(c,y);b=v(b,B);g=v(g,h);u=v(u,G);r=v(r,a)}f=[c,b,g,u,r];n="";for(c=0;c<32*f.length;c+=8)n+=String.fromCharCode(f[c>>5]>>>24-c%32&255);return n}function G(f){for(var m="",c=-1,b,g;++c<f.length;)b=f.charCodeAt(c),g=c+1<f.length?f.charCodeAt(c+1):0,55296<=b&&56319>=b&&56320<=g&&57343>=g&&(b=65536+((b&1023)<<10)+(g&1023),c++),127>=b?m+=String.fromCharCode(b):2047>=b?m+=String.fromCharCode(192|b>>>6&31,128|b&63):65535>=b?m+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,
128|b&63):2097151>=b&&(m+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|b&63));return m}function v(f,m){var c=(f&65535)+(m&65535);return(f>>16)+(m>>16)+(c>>16)<<16|c&65535}"undefined"!==typeof C&&(C.exports={b64_sha1:y,hex_sha1:f})},{}],10:[function(m,C,E){function f(c,b){if("number"!=typeof c||"number"!=typeof b)throw"Bad range "+c+","+b;this._min=c;this._max=b}function y(c){c=c.sort(w);var b=[],g=c.shift();c.forEach(function(c){c._min<=g._max?c._max>g._max&&(g._max=c._max):(b.push(g),
g=c)});b.push(g);this._ranges=b}function B(c,b){c instanceof y||(c instanceof Array||(c=[c]),c=new y(c));b&&c.insertRange(b);return c}function G(c,b){for(var g=c.ranges(),n=b.ranges(),m=g.length,v=n.length,w=0,B=0,h=[];w<m&&B<v;){c=g[w];b=n[B];var G=Math.max(c.min(),b.min()),a=Math.min(c.max(),b.max());a>=G&&h.push(new f(G,a));c.max()>b.max()?++B:++w}return 0==h.length?null:1==h.length?h[0]:new y(h)}function v(c){var b=0;c=c.ranges();for(var g=0;g<c.length;++g)var f=c[g],b=b+(f.max()-f.min()+1);return b}
function n(c,b){return c.min()<b.min()?-1:c.min()>b.min()?1:c.max()<b.max()?-1:b.max()>c.max()?1:0}function w(c,b){return c._min<b._min?-1:c._min>b._min?1:c._max<b._max?-1:b._max>c._max?1:0}f.prototype.min=function(){return this._min};f.prototype.max=function(){return this._max};f.prototype.contains=function(c){return c>=this._min&&c<=this._max};f.prototype.isContiguous=function(){return!0};f.prototype.ranges=function(){return[this]};f.prototype._pushRanges=function(c){c.push(this)};f.prototype.toString=
function(){return"["+this._min+"-"+this._max+"]"};y.prototype.min=function(){return this._ranges[0].min()};y.prototype.max=function(){return this._ranges[this._ranges.length-1].max()};y.prototype.lower_bound=function(c){var b=this.ranges();if(c>this.max())return b.length;if(c<this.min())return 0;for(var g=0,f=b.length-1;g<=f;){var n=Math.floor((g+f)/2);if(c>b[n]._max)g=n+1;else if(c<b[n]._min)f=n-1;else return n}return g};y.prototype.contains=function(c){var b=this.lower_bound(c);return b<this._ranges.length&&
this._ranges[b].contains(c)?!0:!1};y.prototype.insertRange=function(c){var b=this.lower_bound(c._min);if(b===this._ranges.length)this._ranges.push(c);else{var g=this.ranges();if(c._max<g[b]._min)this._ranges.splice(b,0,c);else{g[b]._min<c._min&&(c._min=g[b]._min);for(var f=b+1;f<g.length&&g[f]._min<=c._max;)f++;f--;g[f]._max>c._max&&(c._max=g[f]._max);this._ranges.splice(b,f-b+1,c)}}};y.prototype.isContiguous=function(){return 1<this._ranges.length};y.prototype.ranges=function(){return this._ranges};
y.prototype._pushRanges=function(c){for(var b=0;b<this._ranges.length;++b)c.push(this._ranges[b])};y.prototype.toString=function(){for(var c="",b=0;b<this._ranges.length;++b)0<b&&(c+=","),c+=this._ranges[b].toString();return c};"undefined"!==typeof C&&(C.exports={Range:f,union:B,intersection:G,coverage:v,rangeOver:n,_rangeOrder:w})},{}],11:[function(m,C,E){function f(a,d){for(var b=0;b<a.length;++b)if(a[b]==d)return;a.push(d)}function y(a,d,b){a[d]?a[d].push(b):a[d]=[b]}function B(a,d,b){var c=a[d];
if(c){for(a=0;a<c.length;++a)if(c[a]==b)return;c.push(b)}else a[d]=[b]}function G(a,d,b,c){if(a)return a;if(d)return d;if(b)return b;if(c)return c}function f(a,d){for(var b=0;b<a.length;++b)if(a[b]==d)return;a.push(d)}function v(a,d){if(!a)return-1;for(var b=0;b<a.length;++b)if(a[b]===d)return b;return-1}function n(a,b,c,p){a=document.createElement(a);if(b){b instanceof Array||(b=[b]);for(var l=0;l<b.length;++l){var A=b[l];A&&("string"==typeof A?A=document.createTextNode(A):"number"==typeof A&&(A=
document.createTextNode(""+A)),a.appendChild(A))}}if(c)for(var q in c)try{a[q]=c[q]}catch(h){throw console.log("error setting "+q),h;}if(p)for(q in p)a.style[q]=p[q];return a}function w(a,b,c,p){a=document.createElementNS(a,b);if(c)for(c instanceof Array||(c=[c]),b=0;b<c.length;++b){var l=c[b];"string"==typeof l&&(l=document.createTextNode(l));a.appendChild(l)}if(p)for(var A in p){c=a;b=A;var l=p[A],q=L[b];if(!q){for(var q="",h=0;h<b.length;++h)var g=b.substring(h,h+1),f=g.toLowerCase(),q=f!=g?q+
"-"+f:q+g;L[b]=q}c.setAttribute(q,l)}return a}function c(a){if(a&&a.childNodes)for(;0<a.childNodes.length;)a.removeChild(a.firstChild)}function b(a,d){if("undefined"===typeof a)return"undefined";if(null==a)return"null";if("string"==typeof a)return"'"+a+"'";if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array){for(var c=null,p=0;p<a.length;++p)c=(null==c?"":c+", ")+b(a[p],d);return"["+(c?c:"")+"]"}d=d||{};c=null;for(p in a)d[p]||void 0!=p&&"function"!=
typeof a[p]&&(c=(null==c?"":c+", ")+p+": "+b(a[p],d));return"{"+(c?c:"")+"}"}return typeof a}function g(a){var b={},c;for(c in a)b[c]=a[c];return b}function u(a){this.value=a;this.listeners=[]}function r(){this.queue=[]}function x(e,b,c){c&&c.salt&&(e=e+"?salt="+h(""+Date.now()+","+ ++a));try{var p;c.timeout&&(p=setTimeout(function(){console.log("timing out "+e);l.abort();return b(null,"Timeout")},c.timeout));var l=new XMLHttpRequest;l.onreadystatechange=function(){4==l.readyState&&(p&&clearTimeout(p),
200>l.status||300<=l.status?b(null,"Error code "+l.status):b(l.responseText))};l.open("GET",e,!0);l.responseType="text";c&&c.credentials&&(l.withCredentials=!0);l.send("")}catch(A){b(null,"Exception "+A)}}function F(a,b){if(0==b.indexOf("http:")||0==b.indexOf("https:"))return b;var c=a.lastIndexOf("/");return 0<=c?a.substr(0,c+1)+b:b}function K(a){return n("a",null,{href:a}).href}if("undefined"!==typeof m)var h=m("./sha1").b64_sha1;var L={};u.prototype.addListener=function(a){this.listeners.push(a)};
u.prototype.addListenerAndFire=function(a){this.listeners.push(a);a(this.value)};u.prototype.removeListener=function(a){var b=this.listeners;a=v(b,a);0<=a&&b.splice(a,1)};u.prototype.get=function(){return this.value};u.prototype.set=function(a){this.value=a;for(var b=0;b<this.listeners.length;++b)this.listeners[b](a)};r.prototype.provide=function(a){if(void 0!==this.res)throw"Resource has already been provided.";this.res=a;for(var b=0;b<this.queue.length;++b)this.queue[b](a);this.queue=null};r.prototype.await=
function(a){if(void 0!==this.res)return a(this.res),this.res;this.queue.push(a)};var a=0;m={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"*",TAG:"*",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"*",TGG:"W",
CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"};"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});"undefined"!==typeof C&&(C.exports={textXHR:x,relativeURL:F,resolveUrlToPage:K,shallowCopy:g,pusho:y,pushnew:f,pushnewo:B,arrayIndexOf:v,pick:G,makeElement:n,makeElementNS:w,removeChildren:c,miniJSONify:b,Observed:u,Awaited:r,AMINO_ACID_TRANSLATION:m})},{"./sha1":9}],12:[function(m,C,E){C=m("./promise/promise").Promise;
m=m("./promise/polyfill").polyfill;E.Promise=C;E.polyfill=m},{"./promise/polyfill":17,"./promise/promise":18}],13:[function(m,C,E){var f=m("./utils").isArray,y=m("./utils").isFunction;E.all=function(m){if(!f(m))throw new TypeError("You must pass an array to all.");return new this(function(f,v){function n(b){return function(g){w[b]=g;0===--c&&f(w)}}var w=[],c=m.length,b;0===c&&f([]);for(var g=0;g<m.length;g++)(b=m[g])&&y(b.then)?b.then(n(g),v):(w[g]=b,0===--c&&f(w))})}},{"./utils":22}],14:[function(m,
C,E){(function(f,m){function B(){return function(){f.nextTick(n)}}function G(){var b=0,g=new c(n),f=document.createTextNode("");g.observe(f,{characterData:!0});return function(){f.data=b=++b%2}}function v(){return function(){b.setTimeout(n,1)}}function n(){for(var b=0;b<g.length;b++){var c=g[b];(0,c[0])(c[1])}g=[]}var w="undefined"!==typeof window?window:{},c=w.MutationObserver||w.WebKitMutationObserver,b="undefined"!==typeof m?m:void 0===this?window:this,g=[],u;u="undefined"!==typeof f&&"[object process]"===
{}.toString.call(f)?B():c?G():v();E.asap=function(b,c){1===g.push([b,c])&&u()}}).call(this,m("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:24}],15:[function(m,C,E){E.cast=function(f){return f&&"object"===typeof f&&f.constructor===this?f:new this(function(m){m(f)})}},{}],16:[function(m,C,E){var f={instrument:!1};E.config=f;E.configure=function(m,B){if(2===arguments.length)f[m]=B;else return f[m]}},{}],17:[function(m,
C,E){(function(f){var y=m("./promise").Promise,B=m("./utils").isFunction;E.polyfill=function(){var m;m="undefined"!==typeof f?f:"undefined"!==typeof window&&window.document?window:self;"Promise"in m&&"cast"in m.Promise&&"resolve"in m.Promise&&"reject"in m.Promise&&"all"in m.Promise&&"race"in m.Promise&&function(){var f;new m.Promise(function(n){f=n});return B(f)}()||(m.Promise=y)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},
{"./promise":18,"./utils":22}],18:[function(m,C,E){function f(a){if(!F(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof f))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[];y(a,this)}function y(a,e){function c(a){w(e,a)}function d(a){b(e,a)}try{a(c,d)}catch(k){d(k)}}function B(a,e,c,d){var g=F(c),h,f,m,r;if(g)try{h=
c(d),m=!0}catch(v){r=!0,f=v}else h=d,m=!0;n(e,h)||(g&&m?w(e,h):r?b(e,f):a===k?w(e,h):a===p&&b(e,h))}function G(a,b,e,c){a=a._subscribers;var d=a.length;a[d]=b;a[d+k]=e;a[d+p]=c}function v(a,b){for(var e,c,d=a._subscribers,k=a._detail,p=0;p<d.length;p+=3)e=d[p],c=d[p+b],B(b,e,c,k);a._subscribers=null}function n(a,e){var d=null,k;try{if(a===e)throw new TypeError("A promises callback cannot return that same promise.");if(x(e)&&(d=e.then,F(d)))return d.call(e,function(b){if(k)return!0;k=!0;e!==b?w(a,
b):c(a,b)},function(e){if(k)return!0;k=!0;b(a,e)}),!0}catch(p){if(k)return!0;b(a,p);return!0}return!1}function w(a,b){a===b?c(a,b):n(a,b)||c(a,b)}function c(a,b){a._state===e&&(a._state=d,a._detail=b,r.async(g,a))}function b(a,b){a._state===e&&(a._state=d,a._detail=b,r.async(u,a))}function g(a){v(a,a._state=k)}function u(a){v(a,a._state=p)}var r=m("./config").config;m("./config");var x=m("./utils").objectOrFunction,F=m("./utils").isFunction;m("./utils");C=m("./cast").cast;var K=m("./all").all,h=m("./race").race,
L=m("./resolve").resolve,a=m("./reject").reject;m=m("./asap").asap;r.async=m;var e=void 0,d=0,k=1,p=2;f.prototype={constructor:f,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var e=this,c=new this.constructor(function(){});if(this._state){var d=arguments;r.async(function(){B(e._state,c,d[e._state-1],e._detail)})}else G(this,c,a,b);return c},"catch":function(a){return this.then(null,a)}};f.all=K;f.cast=C;f.race=h;f.resolve=L;f.reject=a;E.Promise=f},{"./all":13,"./asap":14,"./cast":15,
"./config":16,"./race":19,"./reject":20,"./resolve":21,"./utils":22}],19:[function(m,C,E){var f=m("./utils").isArray;E.race=function(m){if(!f(m))throw new TypeError("You must pass an array to race.");return new this(function(f,E){for(var v,n=0;n<m.length;n++)(v=m[n])&&"function"===typeof v.then?v.then(f,E):f(v)})}},{"./utils":22}],20:[function(m,C,E){E.reject=function(f){return new this(function(m,B){B(f)})}},{}],21:[function(m,C,E){E.resolve=function(f){return new this(function(m,B){m(f)})}},{}],
22:[function(m,C,E){function f(f){return"function"===typeof f}m=Date.now||function(){return(new Date).getTime()};E.objectOrFunction=function(m){return f(m)||"object"===typeof m&&null!==m};E.isFunction=f;E.isArray=function(f){return"[object Array]"===Object.prototype.toString.call(f)};E.now=m},{}],23:[function(m,C,E){function f(){}function y(){this.was=[0]}function B(a,b,c){this.hufts=new Int32Array(4320);this.window=new Uint8Array(c);this.end=c;this.checkfn=b;this.mode=0;this.reset(a,null);this.index=
this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new G;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new v}function G(){}function v(){}function n(a,b,c,k,p){if(0!=p){if(!a)throw"Undef src";if(!c)throw"Undef dest";if(0==b&&p==a.length)c.set(a,k);else if(L)a=a.subarray(b,b+p),c.set(a,k);else if(1==a.BYTES_PER_ELEMENT&&100<p)a=new Uint8Array(a.buffer,a.byteOffset+b,p),c.set(a,k);else for(var l=0;l<p;++l)c[k+l]=a[b+l]}}
function w(a,b,c,k){a=b?c?new Uint8Array(a,b,c):new Uint8Array(a,b,a.byteLength-b):new Uint8Array(a);c=new f;c.inflateInit(15,!0);c.next_in=a;c.next_in_index=0;c.avail_in=a.length;a=[];for(var p=0;;){var l=new Uint8Array(32E3);c.next_out=l;c.next_out_index=0;c.avail_out=l.length;var h=c.inflate(0);if(0!=h&&1!=h&&-5!=h)throw c.msg;if(0!=c.avail_out){var g=new Uint8Array(l.length-c.avail_out);n(l,0,g,0,l.length-c.avail_out);l=g}a.push(l);p+=l.length;if(1==h||-5==h)break}k&&(k[0]=(b||0)+c.next_in_index);
if(1==a.length)return a[0].buffer;b=new Uint8Array(p);for(c=k=0;c<a.length;++c)p=a[c],n(p,0,b,k,p.length),k+=p.length;return b.buffer}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],b=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,
8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,
0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,
9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,
0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,
7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,
9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,
125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,
82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],g=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,
5,5,0,112,112],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];f.prototype.inflateInit=function(a,b){a||(a=15);b&&(b=!1);this.istate=new y;return this.istate.inflateInit(this,b?-a:a)};f.prototype.inflate=function(a){return null==this.istate?-2:this.istate.inflate(this,a)};f.prototype.inflateEnd=function(){if(null==this.istate)return-2;var a=istate.inflateEnd(this);
this.istate=null;return a};f.prototype.inflateSync=function(){return istate.inflateSync(this)};f.prototype.inflateSetDictionary=function(a,b){return istate.inflateSetDictionary(this,a,b)};y.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};y.prototype.inflateEnd=function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=null;return 0};y.prototype.inflateInit=function(a,
b){this.blocks=a.msg=null;nowrap=0;0>b&&(b=-b,nowrap=1);if(8>b||15<b)return this.inflateEnd(a),-2;this.wbits=b;a.istate.blocks=new B(a,0!=a.istate.nowrap?null:this,1<<b);this.inflateReset(a);return 0};y.prototype.inflate=function(a,b){var c,k;if(null==a||null==a.istate||null==a.next_in)return-2;b=4==b?-5:0;for(c=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=13;a.msg="unknown compression method";
a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;k=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+k)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(k&32)){a.istate.mode=7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&
255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return c;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=6;return 2;case 6:return a.istate.mode=13,
a.msg="need dictionary",a.istate.marker=0,-2;case 7:c=a.istate.blocks.proc(a,c);if(-3==c){a.istate.mode=13;a.istate.marker=0;break}0==c&&(c=b);if(1!=c)return c;c=b;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&
255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};y.prototype.inflateSetDictionary=function(a,
b,c){var k=0,p=c;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(a._adler.adler32(1,b,0,c)!=a.adler)return-3;a.adler=a._adler.adler32(0,null,0,0);p>=1<<a.istate.wbits&&(p=(1<<a.istate.wbits)-1,k=c-p);a.istate.blocks.set_dictionary(b,k,p);a.istate.mode=7;return 0};var K=[0,0,255,255];y.prototype.inflateSync=function(a){var b,c,k;if(null==a||null==a.istate)return-2;13!=a.istate.mode&&(a.istate.mode=13,a.istate.marker=0);if(0==(b=a.avail_in))return-5;c=a.next_in_index;for(k=a.istate.marker;0!=
b&&4>k;)a.next_in[c]==K[k]?k++:k=0!=a.next_in[c]?0:4-k,c++,b--;a.total_in+=c-a.next_in_index;a.next_in_index=c;a.avail_in=b;a.istate.marker=k;if(4!=k)return-3;b=a.total_in;c=a.total_out;this.inflateReset(a);a.total_in=b;a.total_out=c;a.istate.mode=7;return 0};y.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};var h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];B.prototype.reset=function(a,b){b&&(b[0]=this.check);6==this.mode&&
this.codes.free(a);this.read=this.write=this.bitb=this.bitk=this.mode=0;this.checkfn&&(a.adler=this.check=a._adler.adler32(0,null,0,0))};B.prototype.proc=function(a,e){var d,k,p,l,f,q,t;l=a.next_in_index;f=a.avail_in;k=this.bitb;p=this.bitk;q=this.write;for(t=q<this.read?this.read-q-1:this.end-q;;)switch(this.mode){case 0:for(;3>p;){if(0!=f)e=0;else return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);f--;k|=(a.next_in[l++]&
255)<<p;p+=8}d=k&7;this.last=d&1;switch(d>>>1){case 0:k>>>=3;p-=3;d=p&7;k>>>=d;p-=d;this.mode=1;break;case 1:var z=new Int32Array(1),m=new Int32Array(1),r=[],v=[];d=m;var u=r,w=v;z[0]=9;d[0]=5;u[0]=b;w[0]=g;this.codes.init(z[0],m[0],r[0],0,v[0],0,a);k>>>=3;p-=3;this.mode=6;break;case 2:k>>>=3;p-=3;this.mode=3;break;case 3:return k>>>=3,p-=3,this.mode=13,a.msg="invalid block type",e=-3,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,
e)}break;case 1:for(;32>p;){if(0!=f)e=0;else return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);f--;k|=(a.next_in[l++]&255)<<p;p+=8}if((~k>>>16&65535)!=(k&65535))return this.mode=13,a.msg="invalid stored block lengths",e=-3,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);this.left=k&65535;k=p=0;this.mode=0!=this.left?2:0!=this.last?7:0;break;case 2:if(0==
f)return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,write=q,this.inflate_flush(a,e);if(0==t&&(q==end&&0!=read&&(q=0,t=q<this.read?this.read-q-1:this.end-q),0==t&&(this.write=q,e=this.inflate_flush(a,e),q=this.write,t=q<this.read?this.read-q-1:this.end-q,q==this.end&&0!=this.read&&(q=0,t=q<this.read?this.read-q-1:this.end-q),0==t)))return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,
e);e=0;d=this.left;d>f&&(d=f);d>t&&(d=t);n(a.next_in,l,this.window,q,d);l+=d;f-=d;q+=d;t-=d;if(0!=(this.left-=d))break;this.mode=0!=this.last?7:0;break;case 3:for(;14>p;){if(0!=f)e=0;else return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);f--;k|=(a.next_in[l++]&255)<<p;p+=8}this.table=d=k&16383;if(29<(d&31)||29<(d>>5&31))return this.mode=9,a.msg="too many length or distance symbols",e=-3,this.bitb=k,this.bitk=p,a.avail_in=
f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);d=258+(d&31)+(d>>5&31);if(null==this.blens||this.blens.length<d)this.blens=new Int32Array(d);else for(t=0;t<d;t++)this.blens[t]=0;k>>>=14;p-=14;this.index=0;mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>p;){if(0!=f)e=0;else return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);f--;k|=(a.next_in[l++]&255)<<p;p+=8}this.blens[h[this.index++]]=
k&7;k>>>=3;p-=3}for(;19>this.index;)this.blens[h[this.index++]]=0;this.bb[0]=7;d=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,a);if(0!=d)return e=d,-3==e&&(this.blens=null,this.mode=9),this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,write=q,this.inflate_flush(a,e);this.index=0;this.mode=5;case 5:for(;;){d=this.table;if(!(this.index<258+(d&31)+(d>>5&31)))break;for(d=this.bb[0];p<d;){if(0!=f)e=0;else return this.bitb=k,this.bitk=p,a.avail_in=
f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);f--;k|=(a.next_in[l++]&255)<<p;p+=8}d=this.hufts[3*(this.tb[0]+(k&c[d]))+1];m=this.hufts[3*(this.tb[0]+(k&c[d]))+2];if(16>m)k>>>=d,p-=d,this.blens[this.index++]=m;else{t=18==m?7:m-14;for(z=18==m?11:3;p<d+t;){if(0!=f)e=0;else return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);f--;k|=(a.next_in[l++]&255)<<p;p+=8}k>>>=d;p-=d;z+=k&c[t];k>>>=
t;p-=t;t=this.index;d=this.table;if(t+z>258+(d&31)+(d>>5&31)||16==m&&1>t)return this.blens=null,this.mode=9,a.msg="invalid bit length repeat",e=-3,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);m=16==m?this.blens[t-1]:0;do this.blens[t++]=m;while(0!=--z);this.index=t}}this.tb[0]=-1;z=new Int32Array(1);m=new Int32Array(1);r=new Int32Array(1);v=new Int32Array(1);z[0]=9;m[0]=6;d=this.table;d=this.inftree.inflate_trees_dynamic(257+
(d&31),1+(d>>5&31),this.blens,z,m,r,v,this.hufts,a);if(0!=d)return-3==d&&(this.blens=null,this.mode=13),e=d,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);this.codes.init(z[0],m[0],this.hufts,r[0],this.hufts,v[0],a);this.mode=6;case 6:this.bitb=k;this.bitk=p;a.avail_in=f;a.total_in+=l-a.next_in_index;a.next_in_index=l;this.write=q;if(1!=(e=this.codes.proc(this,a,e)))return this.inflate_flush(a,e);e=0;this.codes.free(a);l=a.next_in_index;
f=a.avail_in;k=this.bitb;p=this.bitk;q=this.write;t=q<this.read?this.read-q-1:this.end-q;if(0==this.last){this.mode=0;break}this.mode=7;case 7:this.write=q;e=this.inflate_flush(a,e);q=this.write;if(this.read!=this.write)return this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);mode=12;case 8:return e=1,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);case 9:return e=
-3,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e);default:return e=-2,this.bitb=k,this.bitk=p,a.avail_in=f,a.total_in+=l-a.next_in_index,a.next_in_index=l,this.write=q,this.inflate_flush(a,e)}};B.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};B.prototype.set_dictionary=function(a,b,c){n(a,b,window,0,c);this.read=this.write=c};B.prototype.sync_point=function(){return 1==this.mode};B.prototype.inflate_flush=
function(a,b){var c,k,f;k=a.next_out_index;f=this.read;c=(f<=this.write?this.write:this.end)-f;c>a.avail_out&&(c=a.avail_out);0!=c&&-5==b&&(b=0);a.avail_out-=c;a.total_out+=c;null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,this.window,f,c));n(this.window,f,a.next_out,k,c);k+=c;f+=c;f==this.end&&(f=0,this.write==this.end&&(this.write=0),c=this.write-f,c>a.avail_out&&(c=a.avail_out),0!=c&&-5==b&&(b=0),a.avail_out-=c,a.total_out+=c,null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,
this.window,f,c)),n(this.window,f,a.next_out,k,c),k+=c,f+=c);a.next_out_index=k;this.read=f;return b};G.prototype.init=function(a,b,c,k,f,l,h){this.mode=0;this.lbits=a;this.dbits=b;this.ltree=c;this.ltree_index=k;this.dtree=f;this.dtree_index=l;this.tree=null};G.prototype.proc=function(a,b,d){var k,f,l=0,h=0,g=0,n,m,r,g=b.next_in_index;n=b.avail_in;l=a.bitb;h=a.bitk;m=a.write;for(r=m<a.read?a.read-m-1:a.end-m;;)switch(this.mode){case 0:if(258<=r&&10<=n&&(a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=
g-b.next_in_index,b.next_in_index=g,a.write=m,d=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,a,b),g=b.next_in_index,n=b.avail_in,l=a.bitb,h=a.bitk,m=a.write,r=m<a.read?a.read-m-1:a.end-m,0!=d)){this.mode=1==d?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=1;case 1:for(k=this.need;h<k;){if(0!=n)d=0;else return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,
d);n--;l|=(b.next_in[g++]&255)<<h;h+=8}k=3*(this.tree_index+(l&c[k]));l>>>=this.tree[k+1];h-=this.tree[k+1];f=this.tree[k];if(0==f){this.lit=this.tree[k+2];this.mode=6;break}if(0!=(f&16)){this.get=f&15;this.len=this.tree[k+2];this.mode=2;break}if(0==(f&64)){this.need=f;this.tree_index=k/3+this.tree[k+2];break}if(0!=(f&32)){this.mode=7;break}this.mode=9;b.msg="invalid literal/length code";d=-3;a.bitb=l;a.bitk=h;b.avail_in=n;b.total_in+=g-b.next_in_index;b.next_in_index=g;a.write=m;return a.inflate_flush(b,
d);case 2:for(k=this.get;h<k;){if(0!=n)d=0;else return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d);n--;l|=(b.next_in[g++]&255)<<h;h+=8}this.len+=l&c[k];l>>=k;h-=k;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(k=this.need;h<k;){if(0!=n)d=0;else return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d);n--;l|=(b.next_in[g++]&
255)<<h;h+=8}k=3*(this.tree_index+(l&c[k]));l>>=this.tree[k+1];h-=this.tree[k+1];f=this.tree[k];if(0!=(f&16)){this.get=f&15;this.dist=this.tree[k+2];this.mode=4;break}if(0==(f&64)){this.need=f;this.tree_index=k/3+this.tree[k+2];break}this.mode=9;b.msg="invalid distance code";d=-3;a.bitb=l;a.bitk=h;b.avail_in=n;b.total_in+=g-b.next_in_index;b.next_in_index=g;a.write=m;return a.inflate_flush(b,d);case 4:for(k=this.get;h<k;){if(0!=n)d=0;else return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,
b.next_in_index=g,a.write=m,a.inflate_flush(b,d);n--;l|=(b.next_in[g++]&255)<<h;h+=8}this.dist+=l&c[k];l>>=k;h-=k;this.mode=5;case 5:for(k=m-this.dist;0>k;)k+=a.end;for(;0!=this.len;){if(0==r&&(m==a.end&&0!=a.read&&(m=0,r=m<a.read?a.read-m-1:a.end-m),0==r&&(a.write=m,d=a.inflate_flush(b,d),m=a.write,r=m<a.read?a.read-m-1:a.end-m,m==a.end&&0!=a.read&&(m=0,r=m<a.read?a.read-m-1:a.end-m),0==r)))return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,
d);a.window[m++]=a.window[k++];r--;k==a.end&&(k=0);this.len--}this.mode=0;break;case 6:if(0==r&&(m==a.end&&0!=a.read&&(m=0,r=m<a.read?a.read-m-1:a.end-m),0==r&&(a.write=m,d=a.inflate_flush(b,d),m=a.write,r=m<a.read?a.read-m-1:a.end-m,m==a.end&&0!=a.read&&(m=0,r=m<a.read?a.read-m-1:a.end-m),0==r)))return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d);d=0;a.window[m++]=this.lit;r--;this.mode=0;break;case 7:7<h&&(h-=8,n++,g--);a.write=m;
d=a.inflate_flush(b,d);m=a.write;if(a.read!=a.write)return a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d);this.mode=8;case 8:return d=1,a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d);case 9:return d=-3,a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d);default:return d=-2,a.bitb=l,a.bitk=h,b.avail_in=n,b.total_in+=
g-b.next_in_index,b.next_in_index=g,a.write=m,a.inflate_flush(b,d)}};G.prototype.free=function(a){};G.prototype.inflate_fast=function(a,b,d,f,h,l,g,m){var t,r,v,u,w,y,x,B,E,G,C,F;y=m.next_in_index;x=m.avail_in;u=g.bitb;w=g.bitk;B=g.write;E=B<g.read?g.read-B-1:g.end-B;a=c[a];G=c[b];do{for(;20>w;)x--,u|=(m.next_in[y++]&255)<<w,w+=8;t=u&a;r=d;v=f;F=3*(v+t);if(0==(b=r[F]))u>>=r[F+1],w-=r[F+1],g.window[B++]=r[F+2],E--;else{do{u>>=r[F+1];w-=r[F+1];if(0!=(b&16)){b&=15;C=r[F+2]+(u&c[b]);u>>=b;for(w-=b;15>
w;)x--,u|=(m.next_in[y++]&255)<<w,w+=8;t=u&G;r=h;v=l;F=3*(v+t);b=r[F];do if(u>>=r[F+1],w-=r[F+1],0!=(b&16)){for(b&=15;w<b;)x--,u|=(m.next_in[y++]&255)<<w,w+=8;t=r[F+2]+(u&c[b]);u>>=b;w-=b;E-=C;if(B>=t)t=B-t,g.window[B++]=g.window[t++],g.window[B++]=g.window[t++],C-=2;else{t=B-t;do t+=g.end;while(0>t);b=g.end-t;if(C>b){C-=b;if(0<B-t&&b>B-t){do g.window[B++]=g.window[t++];while(0!=--b)}else n(g.window,t,g.window,B,b),B+=b;t=0}}do g.window[B++]=g.window[t++];while(0!=--C);break}else if(0==(b&64))t+=
r[F+2],t+=u&c[b],F=3*(v+t),b=r[F];else return m.msg="invalid distance code",C=m.avail_in-x,C=w>>3<C?w>>3:C,x+=C,y-=C,w-=C<<3,g.bitb=u,g.bitk=w,m.avail_in=x,m.total_in+=y-m.next_in_index,m.next_in_index=y,g.write=B,-3;while(1);break}if(0==(b&64)){if(t+=r[F+2],t+=u&c[b],F=3*(v+t),0==(b=r[F])){u>>=r[F+1];w-=r[F+1];g.window[B++]=r[F+2];E--;break}}else{if(0!=(b&32))return C=m.avail_in-x,C=w>>3<C?w>>3:C,x+=C,y-=C,w-=C<<3,g.bitb=u,g.bitk=w,m.avail_in=x,m.total_in+=y-m.next_in_index,m.next_in_index=y,g.write=
B,1;m.msg="invalid literal/length code";C=m.avail_in-x;C=w>>3<C?w>>3:C;x+=C;y-=C;w-=C<<3;g.bitb=u;g.bitk=w;m.avail_in=x;m.total_in+=y-m.next_in_index;m.next_in_index=y;g.write=B;return-3}}while(1)}}while(258<=E&&10<=x);C=m.avail_in-x;C=w>>3<C?w>>3:C;y-=C;g.bitb=u;g.bitk=w-(C<<3);m.avail_in=x+C;m.total_in+=y-m.next_in_index;m.next_in_index=y;g.write=B;return 0};v.prototype.huft_build=function(a,b,c,g,f,h,m,q,r,u,w){var v,y,x,B,C,E,F,G,J;E=0;y=c;do this.c[a[b+E]]++,E++,y--;while(0!=y);if(this.c[0]==
c)return m[0]=-1,q[0]=0;C=q[0];for(x=1;15>=x&&0==this.c[x];x++);B=x;C<x&&(C=x);for(y=15;0!=y&&0==this.c[y];y--);u=y;C>y&&(C=y);q[0]=C;for(q=1<<x;x<y;x++,q<<=1)if(0>(q-=this.c[x]))return-3;if(0>(q-=this.c[y]))return-3;this.c[y]+=q;this.x[1]=x=0;E=1;for(F=2;0!=--y;)this.x[F]=x+=this.c[E],F++,E++;E=y=0;do 0!=(x=a[b+E])&&(this.v[this.x[x]++]=y),E++;while(++y<c);c=this.x[u];E=this.x[0]=y=0;b=-1;G=-C;for(J=F=this.u[0]=0;B<=u;B++)for(a=this.c[B];0!=a--;){for(;B>G+C;){b++;G+=C;J=u-G;J=J>C?C:J;if((v=1<<(x=
B-G))>a+1&&(v-=a+1,F=B,x<J))for(;++x<J&&!((v<<=1)<=this.c[++F]);)v-=this.c[F];J=1<<x;if(1440<this.hn[0]+J)return-3;this.u[b]=F=this.hn[0];this.hn[0]+=J;0!=b?(this.x[b]=y,this.r[0]=x,this.r[1]=C,x=y>>>G-C,this.r[2]=F-this.u[b-1]-x,n(this.r,0,r,3*(this.u[b-1]+x),3)):m[0]=F}this.r[1]=B-G;E>=c?this.r[0]=192:w[E]<g?(this.r[0]=256>this.v[E]?0:96,this.r[2]=this.v[E++]):(this.r[0]=h[this.v[E]-g]+16+64,this.r[2]=f[this.v[E++]-g]);v=1<<B-G;for(x=y>>>G;x<J;x+=v)n(this.r,0,r,3*(F+x),3);for(x=1<<B-1;0!=(y&x);x>>>=
1)y^=x;y^=x;for(x=(1<<G)-1;(y&x)!=this.x[b];)b--,G-=C,x=(1<<G)-1}return 0!=q&&1!=u?-5:0};v.prototype.inflate_trees_bits=function(a,b,c,g,f){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,g,this.hn,this.v);if(-3==a)f.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])f.msg="incomplete dynamic bit lengths tree",a=-3;return a};v.prototype.inflate_trees_dynamic=function(a,b,c,g,f,h,m,n,t){this.initWorkArea(288);this.hn[0]=0;h=this.huft_build(c,0,a,257,u,
r,h,g,n,this.hn,this.v);if(0!=h||0==g[0])return-3==h?t.msg="oversubscribed literal/length tree":-4!=h&&(t.msg="incomplete literal/length tree",h=-3),h;this.initWorkArea(288);h=this.huft_build(c,a,b,0,x,F,m,f,n,this.hn,this.v);return 0!=h||0==f[0]&&257<a?(-3==h?t.msg="oversubscribed distance tree":-5==h?(t.msg="incomplete distance tree",h=-3):-4!=h&&(t.msg="empty distance tree with lengths",h=-3),h):0};v.prototype.initWorkArea=function(a){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(a),
this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16));this.v.length<a&&(this.v=new Int32Array(a));for(var b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;n(this.c,0,this.u,0,15);n(this.c,0,this.x,0,16)};var L="function"===typeof(new Uint8Array(1)).subarray;"undefined"!==typeof C&&(C.exports={inflateBuffer:w,arrayCopy:n})},{}],24:[function(m,C,E){function f(){n=!1;w.length?v=w.concat(v):c=-1;v.length&&y()}function y(){if(!n){var b=
setTimeout(f);n=!0;for(var g=v.length;g;){w=v;for(v=[];++c<g;)w&&w[c].run();c=-1;g=v.length}w=null;n=!1;clearTimeout(b)}}function B(b,c){this.fun=b;this.array=c}function G(){}m=C.exports={};var v=[],n=!1,w,c=-1;m.nextTick=function(b){var c=Array(arguments.length-1);if(1<arguments.length)for(var f=1;f<arguments.length;f++)c[f-1]=arguments[f];v.push(new B(b,c));1!==v.length||n||setTimeout(y,0)};B.prototype.run=function(){this.fun.apply(null,this.array)};m.title="browser";m.browser=!0;m.env={};m.argv=
[];m.version="";m.versions={};m.on=G;m.addListener=G;m.once=G;m.off=G;m.removeListener=G;m.removeAllListeners=G;m.emit=G;m.binding=function(b){throw Error("process.binding is not supported");};m.cwd=function(){return"/"};m.chdir=function(b){throw Error("process.chdir is not supported");};m.umask=function(){return 0}},{}]},{},[7]);
